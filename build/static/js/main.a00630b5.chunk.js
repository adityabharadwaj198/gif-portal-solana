(this["webpackJsonpgif-portal-solana"]=this["webpackJsonpgif-portal-solana"]||[]).push([[0],{105:function(e,t,n){},107:function(e,t,n){},108:function(e,t){},111:function(e,t){},133:function(e,t){},134:function(e,t){},158:function(e,t,n){"use strict";n.r(t);var c=n(25),r=n.n(c),a=n(95),s=n.n(a),i=(n(105),n(3)),o=n(9),u=n(1),l=n.n(u),p=n.p+"static/media/like.35a23236.svg",d=n.p+"static/media/dislike.5bb86779.svg",f=n.p+"static/media/coin.99e6800f.svg",b=(n(107),n(45)),m=n(8),g=n(20),h=n(99),j=n(11),v=void 0,x="https://twitter.com/".concat("adi1yabharadwaj"),y=g.d.SystemProgram,w=(g.d.Keypair,Object.values(h._keypair.secretKey)),k=new Uint8Array(w),O=g.d.Keypair.fromSecretKey(k),S=new m.PublicKey(b.metadata.address),K=Object(m.clusterApiUrl)("devnet"),N="processed",A=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),u=s[0],h=s[1],w=Object(c.useState)([]),k=Object(o.a)(w,2),A=k[0],C=k[1],L=function(e){var t=e.target.value;h(t)},G=function(){var e=new m.Connection(K,N);return new g.b(e,window.solana,N)},P=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=G(),n=new g.a(b,S,t),console.log("Here is the Account",O),e.next=6,n.account.baseAccount.fetch(O.publicKey);case 6:c=e.sent,console.log("Got the account",c),C(c.gifList),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error in getGifList: ",e.t0),C(null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=G(),n=new g.a(b,S,t),console.log("ping"),e.next=6,n.rpc.startStuffOff({accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey,systemProgram:y.programId},signers:[O]});case 6:return console.log("Created a new BaseAccount w/ address:",O.publicKey.toString()),e.next=9,P();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error creating BaseAccount account:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(l.a.mark((function e(){var t,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(c=t.solana)){e.next=13;break}if(!c.isPhantom){e.next=11;break}return console.log("Phantom wallet found!"),e.next=7,c.connect();case 7:a=e.sent,console.log("Connected with public key:",a.publicKey.toString()),r(a.publicKey.toString()),console.log("Wallet address is ",n);case 11:e.next=14;break;case 13:alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=7;break}return e.next=4,n.connect();case 4:c=e.sent,console.log("Connected with public key:",c.publicKey.toString()),r(c.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==u.length){e.next=3;break}return console.log("no link given"),e.abrupt("return");case 3:return h(""),console.log("Gif link:",u),e.prev=5,t=G(),n=new g.a(b,S,t),e.next=10,n.rpc.addGif(u,{accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey}});case 10:return console.log("gif successfully sent to program",u),e.next=13,P();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("error sending gif:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(l.a.mark((function e(t,n){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside increment"),e.prev=1,console.log("Here"),c=G(),r=new g.a(b,S,c),e.next=7,r.rpc.upvoteGif(n,{accounts:{baseAccount:O.publicKey}});case 7:return e.next=9,P();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Failed to upvote gif: ",n,e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Inside decrement");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c,r,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G(),c=new m.Connection(K,N),console.log("here is the sender address {} & reciever address {}",n.wallet.publicKey,t),r=(new g.d.Transaction).add(g.d.SystemProgram.transfer({fromPubkey:n.wallet.publicKey,toPubkey:t,lamports:1e5})),e.next=6,n.wallet.publicKey;case 6:return r.feePayer=e.sent,e.next=9,c.getRecentBlockhash();case 9:return a=e.sent,e.next=12,a.blockhash;case 12:return r.recentBlockhash=e.sent,r&&console.log("transaction created successsfully"),e.next=16,n.wallet.signTransaction(r);case 16:return s=e.sent,e.next=19,c.sendRawTransaction(s.serialize());case 19:return i=e.sent,e.next=22,c.confirmTransaction(i);case 22:console.log("here is the signature of the txn: ",i);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]),Object(c.useEffect)((function(){n&&(console.log("Fetching GIF list..."),P())}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("div",{className:"header-container",children:[Object(j.jsx)("p",{className:"header",children:"may-may portal for dank mimirs"}),Object(j.jsx)("p",{className:"sub-text",children:"View your may-may collection in the metaverse \u2728"}),!n&&(console.log("in here renderNotConnectedContainer"),Object(j.jsx)("button",{onClick:M,className:"cta-button connect-wallet-button",children:"Connect to Wallet"})),Object(j.jsx)("div",{className:n?"authed-container":"container",children:n&&(console.log("in here renderConnectedContainer"),null===A?(console.log("in here gifList == null"),Object(j.jsx)("div",{className:"connected-container",children:Object(j.jsx)("button",{className:"cta-button submit-gif-button",onClick:E,children:"Do One-Time Initialization For GIF Program Account"})})):(console.log("in here gifList is not null"),Object(j.jsxs)("div",{className:"connected-container",children:[Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B()},children:[Object(j.jsx)("input",{type:"text",placeholder:"Enter gif link!",value:u,onChange:L}),Object(j.jsx)("button",{type:"submit",className:"cta-button submit-gif-button",children:"Submit"})]}),Object(j.jsx)("div",{className:"gif-grid",children:A.map((function(e,t){return Object(j.jsxs)("figure",{children:[Object(j.jsx)("div",{className:"gif-item",children:Object(j.jsx)("img",{src:e.gifLink,alt:e.gifLink})},t),Object(j.jsxs)("div",{className:"button-grid",children:[Object(j.jsxs)("button",{className:"cta-button upvote-button",onClick:function(){return F(v,e.gifLink)},children:[Object(j.jsx)("img",{id:"like-button",src:p,alt:"like"}),Object(j.jsx)("span",{children:" like "})]}),Object(j.jsxs)("button",{className:"cta-button upvote-button",onClick:function(){return T(v,e.gifLink)},children:[Object(j.jsx)("img",{id:"dislike-button",src:d,alt:"dislike"}),Object(j.jsx)("span",{children:" dislike "})]}),Object(j.jsxs)("button",{id:"tip-button",className:"cta-button upvote-button",onClick:function(){return H(e.userAddress)},children:[Object(j.jsx)("img",{src:f,alt:"coin"}),Object(j.jsx)("span",{children:" tip "})]})]})]})}))})]})))})]}),Object(j.jsxs)("div",{className:"footer-container",children:["Made with \u2764\ufe0f by ",x]})]})})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root"))},45:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"myepicproject","instructions":[{"name":"startStuffOff","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"gifLink","type":"string"}]},{"name":"upvoteGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false}],"args":[{"name":"gifLink","type":"string"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"},{"name":"upvotes","type":"u64"}]}}],"metadata":{"address":"69fefy3HdEzo6dpGHMpryoNSiB3VUWanFGScRCaAPAbj"}}')},99:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":10,"1":85,"2":101,"3":141,"4":141,"5":129,"6":18,"7":125,"8":114,"9":46,"10":184,"11":141,"12":59,"13":205,"14":94,"15":153,"16":66,"17":84,"18":152,"19":45,"20":37,"21":165,"22":45,"23":119,"24":219,"25":208,"26":102,"27":229,"28":66,"29":11,"30":171,"31":39},"secretKey":{"0":64,"1":73,"2":142,"3":151,"4":25,"5":15,"6":140,"7":139,"8":254,"9":23,"10":81,"11":128,"12":158,"13":215,"14":229,"15":150,"16":120,"17":203,"18":125,"19":195,"20":65,"21":186,"22":23,"23":230,"24":88,"25":165,"26":95,"27":117,"28":99,"29":144,"30":110,"31":221,"32":10,"33":85,"34":101,"35":141,"36":141,"37":129,"38":18,"39":125,"40":114,"41":46,"42":184,"43":141,"44":59,"45":205,"46":94,"47":153,"48":66,"49":84,"50":152,"51":45,"52":37,"53":165,"54":45,"55":119,"56":219,"57":208,"58":102,"59":229,"60":66,"61":11,"62":171,"63":39}}}')}},[[158,1,2]]]);
//# sourceMappingURL=main.a00630b5.chunk.js.map